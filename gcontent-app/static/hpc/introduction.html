

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; High-Performance Computing</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Parallel Programming" href="parallel-programming.html" />
    <link rel="prev" title="High-Performance Computing" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #000099" >
          

          
            <a href="index.html" class="icon icon-home"> High-Performance Computing
          

          
            
            <img src="_static/galvanize-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">HPC</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-run-code-in-parallel">Why run code in parallel?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#high-performance-computing">High-Performance Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-resources">Additional resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parallel-programming.html">Parallel Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiprocessing.html">Multiprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse-matrices.html">Sparse Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="subprocessing.html">Subprocessing</a></li>
</ul>
<p class="caption"><span class="caption-text">APPENDICES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cython.html">Cython</a></li>
</ul>
<p class="caption"><span class="caption-text">LEARN</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://127.0.0.1:5000/dashboard">Lesson Dashboard</a></li>
<li class="toctree-l1"><a class="reference external" href="https://learn-2.galvanize.com">Checkpoints Overview</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">High-Performance Computing</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>There is an appropriate sequence to creating programs:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Make it work</p></li>
<li><p>Ensure it is right</p></li>
<li><p>Make it fast</p></li>
</ol>
</div></blockquote>
<p>Concentrating on the last step before the previous two can result in significantly more total work.  Sometimes our
programs are fast enough and we do not even need the last step.  If we have some evidence that our programs work and
that the details are correct then the following sections should help you make it faster.</p>
<p>There are plenty of examples where a well-written script addresses a specific need even without the use of
machine learning.  What if we were interested in optimizing how maintenance crews are deployed to jobs or how packages
need to be delivered for a given day?  This would both be variants on the
the <a class="reference external" href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">traveling salesman problem</a> where you could write
a brute-force algorithm or use some variant on a
<a class="reference external" href="https://en.wikipedia.org/wiki/Minimum_spanning_tree">minimal spanning tree</a> to solve it. Either way, these are
both very useful tools that do no rely on machine learning algorithms.</p>
<p>At a higher level there are two important areas of data science where a trove of these algorithms can be found.</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Mathematical_optimization">optimization</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Graph_theory">graph theory</a></p></li>
</ol>
<p>These tools do not rely on an in-depth knowledge of models or machine-learning they require an awareness of algorithmic
solutions.</p>
<p>The first rule, <strong>make it work</strong>, is meant to ensuring that you are optimizing your code in a smart way.  You should
look around for implementations before spending significant amounts of time on creating one.  The
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html">scipy.optimize</a> submodule has a number of
optimizers and algorithms (some of them general purpose) already implemented.  If your problem is in graph space like
<a class="reference external" href="https://en.wikipedia.org/wiki/Customer_experience">customer journeys</a> or social networks then check out the
<a class="reference external" href="https://networkx.github.io/documentation/stable/reference/algorithms/index.html">algorithms implemented by NetworkX</a>
before you set off building your own.</p>
<p>Finally, we come to the scripts or blocks of code that need speed improvements, but you have come to
the conclusion that there is no optimized code readily available.  The task of optimizing the code then falls to you.
The first step is to identify which parts of your code are bottlenecks.  This is done using
<a class="reference external" href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)">profiling</a> or more specifically <a class="reference external" href="https://docs.python.org/3/library/profile.html">Python
profilers</a>.  Once the specific pieces of code that
need to be optimized are identified, then there are a number of common tools that may be used to improve the speed of
programs.  Several of these tools make use of the fact that modern computers have multiple available processor cores on
a machine.  To see how many processor cores are available on your machine or compute resource try the following code.</p>
<p>A list of commonly used techniques and tools to optimize code:</p>
<dl class="simple">
<dt>Use appropriate data containers</dt><dd><p>For example, a Python set has a shorter look-up time than a Python list.  Similarly, use dictionaries and NumPy
arrays whenever possible.</p>
</dd>
<dt><a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html">Multiprocessing</a></dt><dd><p>This is a package in the standard Python library and it supports spawning processes (for each core) using an API
similar to the threading module. The multiprocessing package offers both local and remote concurrency.</p>
</dd>
<dt><a class="reference external" href="https://docs.python.org/3/library/threading.html#module-threading">Threading</a></dt><dd><p>Another package in the standard library that allows separate flows of execution at a lower level than
multiprocessing.</p>
</dd>
<dt><a class="reference external" href="https://docs.python.org/3/library/subprocess.html">Subprocessing</a></dt><dd><p>A module that allows you to spawn new processes, connect to their input/output/error pipes, and obtain their return codes.
You may run <strong>and control</strong> non-Python processes like Bash or R with the subprocessing module.</p>
</dd>
<dt><a class="reference external" href="https://mpi4py.readthedocs.io/en/stable/">mpi4py</a></dt><dd><p>MPI for Python provides bindings of the Message Passing Interface (MPI) standard for the Python programming
language, allowing any Python program to exploit multiple processors.</p>
</dd>
<dt><a class="reference external" href="https://ipyparallel.readthedocs.io/en/latest/">ipyparallel</a></dt><dd><p>Parallel computing tools for use with Jupyter notebooks and IPython.  Can be used with mpi4py.</p>
</dd>
<dt><a class="reference external" href="https://cython.org/">Cython</a></dt><dd><p>An optimizing static compiler for both the Python programming language and the extended Cython programming language
It is generally used to write C extensions for slow portions of code.</p>
</dd>
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/CUDA">CUDA (Compute Unified Device Architecture)</a></dt><dd><p>Parallel computing platform and API created by <a class="reference external" href="https://www.nvidia.com/en-us/">Nvidia</a> for use with CUDA-enabled
GPUs.  CUDA in the Python environment is often  run using the package <a class="reference external" href="https://documen.tician.de/pycuda/">PyCUDA</a>.</p>
</dd>
</dl>
<div class="section" id="why-run-code-in-parallel">
<h2>Why run code in parallel?<a class="headerlink" href="#why-run-code-in-parallel" title="Permalink to this headline">¶</a></h2>
<p>There are numerous reasons to run your code in parallel</p>
<blockquote>
<div><ul>
<li><p>Modern computers have multiple cores and <a class="reference external" href="https://en.wikipedia.org/wiki/Hyper-threading">hyperthreading</a></p></li>
<li><p>Graphics processing units (GPUs) have driven many of the recent advancements in data science</p></li>
<li><p>Many of the newest <em>i7</em> processors have 8 cores</p></li>
<li><p>The is a lot of <strong>potential</strong> but the overhead can be demanding for some problems</p></li>
<li><p>When we call a python script e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python run.py
</pre></div>
</div>
</li>
</ul>
<p>only a single core is dedicated to this process by default.
<a class="reference external" href="https://en.wikipedia.org/wiki/Parallel_computing">Parallel computing</a> can help us make better use of the
available hardware.</p>
</div></blockquote>
<p>How many cores do I have?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span><span class="p">,</span> <span class="n">cpu_count</span>
<span class="n">total_cores</span> <span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;total cores: &#39;</span><span class="p">,</span> <span class="n">total_cores</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>total cores: 8
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you are on a Linux or MacOS machine try using <strong>htop</strong> (installed via brew or apt)</p>
</div>
<p>So if we have 32 cores… the time taken in (HH:MM:SS)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 53%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>1 core</p></th>
<th class="head"><p>32 cores</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 minute (60s)</p></td>
<td><p>00:00:02</p></td>
</tr>
<tr class="row-odd"><td><p>1 hour (3600s)</p></td>
<td><p>00:01:52</p></td>
</tr>
<tr class="row-even"><td><p>1 Day (86400s)</p></td>
<td><p>00:45:00</p></td>
</tr>
<tr class="row-odd"><td><p>1 Month (2628288s)</p></td>
<td><p>22:48:54</p></td>
</tr>
<tr class="row-even"><td><p>1 Year (3.156e7s)</p></td>
<td><p>11 days, 09:45:00</p></td>
</tr>
</tbody>
</table>
<p>Of course that is in an ideal world.  We still have to consider read/write operations memory allocation and all the
other procedural overhead.</p>
</div>
<div class="section" id="high-performance-computing">
<h2>High-Performance Computing<a class="headerlink" href="#high-performance-computing" title="Permalink to this headline">¶</a></h2>
<p>We mentioned in the previous section that inference can be difficult to optimize and that one way around this is to add
more GPUs.  The general idea of using an aggregation of compute resources to dramatically increase available compute
resources is known as high-performance computing (HPC) or <a class="reference external" href="https://en.wikipedia.org/wiki/Supercomputer">supercomputing</a>.
Within this field there is the important concept of <a class="reference external" href="https://en.wikipedia.org/wiki/Parallel_computing">parallel computing</a>,
which is exactly what we enable by adding multiple GPUs to compuation tasks.</p>
<p>Supercomputers and parallel computing can help with model training, prediction and other related tasks, but it is worth
noting that there are two laws that constrain the maximum speed-up of computing:
<a class="reference external" href="https://en.wikipedia.org/wiki/Amdahl%27s_law">Amdahl’s law</a> and
<a class="reference external" href="https://en.wikipedia.org/wiki/Gustafson%27s_law">Gustafson’s law</a>.  Listed below is some of the important terminology
in this space.</p>
<dl class="simple">
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/Symmetric_multiprocessing">Symmetric multiprocessing</a></dt><dd><p>Two or more identical processors connected to a single unit of memory.</p>
</dd>
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/Distributed_computing">Distributed computing</a></dt><dd><p>Processing elements are connected by a network.</p>
</dd>
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/Computer_cluster">Cluster computing</a></dt><dd><p>Group of loosely (or tightly) coupled computers that work together in a way that they can be viewed as a single system.</p>
</dd>
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/Massively_parallel">Massive parallel processing</a></dt><dd><p>Many networked processors usually &gt; 100 used to perform computations in parallel.</p>
</dd>
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/Grid_computing">Grid computing</a></dt><dd><p>distributed computing making use of a middle layer to create a <cite>virtual super computer</cite>.</p>
</dd>
</dl>
<p>An important part of this course is dealing with data at scale, which is closely related to both code
optimization and parallel computing.  In this course will be using <a class="reference external" href="https://spark.apache.org/">Apache Spark</a>, a
cluster-computing framework, to enable parallel computing.</p>
<p>If we talk about scale in the context of a program or model, we may be referring to any of the following questions.
Let the word <strong>service</strong> in this context be both the deployed model and the infrastructure.</p>
<ul class="simple">
<li><p>Does my service train in a reasonable amount of time given a lot more data?</p></li>
<li><p>Does my service predict in a reasonable amount of time given a lot more data?</p></li>
<li><p>Is my service ready to support additional request load?</p></li>
</ul>
<p>It is important to think about what kind of scale is required by your model and business application in terms of which
bottleneck is most likely going to be the problem associated with scale.  These bottlenecks will depend heavily on
available infrastructure, code optimizations, choice of model and type of business opportunity.  The three questions
above can serve as a guide to help put scale into perspective for a given situation.</p>
</div>
<div class="section" id="additional-resources">
<h2>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://scipy-lectures.org/advanced/optimizing/index.html">scipy-lectures tutorial for optimizing code</a></p></li>
<li><p><a class="reference external" href="https://mpi4py.readthedocs.io/en/stable/tutorial.html">mpi4py tutorial</a></p></li>
<li><p><a class="reference external" href="https://ipyparallel.readthedocs.io/en/latest/demos.html">ipyparallel demos</a></p></li>
<li><p><a class="reference external" href="https://cython.readthedocs.io/en/latest/src/tutorial/cython_tutorial.html">Cython tutorial</a></p></li>
<li><p><a class="reference external" href="http://homepage.stat.uiowa.edu/~luke/talks/uiowa03.pdf">A talk about parallel computing in R (Luke Tierney)</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="parallel-programming.html" class="btn btn-neutral float-right" title="Parallel Programming" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="High-Performance Computing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>